<%- include('partials/header') %> <% if (name) { %>
<h1>Welcome, <%= name %>!</h1>
<% } else { %>
<script>
  window.location.href = "/";
</script>
<% } %>

<h2>All Posts</h2>
<ul>
  <% posts.forEach(post => { %>
  <li>
    <h3><%= post.title %></h3>
    <p>
      <%= post.content.slice(0, 100) %>...
      <a href="/post/<%= post.id %>">Read More</a>
    </p>
  </li>
  <% }) %>
</ul>

<h2>New Post</h2>
<form action="/add-post" method="POST">
  <label for="title">Title:</label>
  <input type="text" id="title" name="title" required />
  <label for="content">Content:</label>
  <textarea id="content" name="content" required></textarea>
  <button type="submit">Submit</button>
</form>
<%- include('partials/footer') %>
